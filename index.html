<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="61Y9kjxqcAt7TYpyxqaFIaPjGP3IktL46ohSLVOZY4c" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
        <title>HexLife Explorer - Interactive Hexagonal Cellular Automata</title>
    <meta name="description" content="Explore complex emergent behaviors with HexLife Explorer, an interactive web-based cellular automaton simulator on a hexagonal grid, powered by WebGL2 and Web Workers. Define custom rulesets and observe intricate patterns unfold in multiple concurrent simulations.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sidem.github.io/HexLife/">
    <meta property="og:title" content="HexLife Explorer - Interactive Hexagonal Cellular Automata">
    <meta property="og:description" content="Discover emergent complexity with HexLife Explorer, a WebGL2 & Web Worker powered cellular automaton on a hexagonal grid.">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://sidem.github.io/HexLife/">
    <meta property="twitter:title" content="HexLife Explorer - Interactive Hexagonal Cellular Automata">
    <meta property="twitter:description" content="Discover emergent complexity with HexLife Explorer, a WebGL2 & Web Worker powered cellular automaton on a hexagonal grid.">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "HexLife Explorer",
      "operatingSystem": "WEB",
      "applicationCategory": "GameApplication",
      "offers": {
        "@type": "Offer",
        "price": "0"
      },
      "abstract": "An interactive web-based cellular automaton simulator on a hexagonal grid, leveraging WebGL2 for high-performance rendering and Web Workers for concurrent simulations. Users can define custom rulesets and observe emergent behaviors.",
      "url": "https://sidem.github.io/HexLife/",
      "author": {
        "@type": "Person",
        "name": "Sidem"
      },
      "keywords": "cellular automata, hexagonal grid, WebGL, simulation, generative art, complex systems, web workers, javascript"
    }
    </script>
    <link rel="preload" href="style.css?v=1.2" as="style">
    <link rel="preload" href="src/main.js" as="script" crossorigin="">
    <link rel="stylesheet" href="style.css?v=1.2">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.ico">
</head>

<body>
    <div id="loading-indicator" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #1e1e1e; display: flex; align-items: center; justify-content: center; z-index: 10000; color: #e0e0e0; font-size: 1.2em;">
        <div style="text-align: center;">
            <div style="font-size: 2em; margin-bottom: 10px;">⬡</div>
            <div>Loading HexLife Explorer...</div>
        </div>
    </div>
    <div id="onboarding-overlay" class="hidden"></div>
    <div id="onboarding-tooltip" class="hidden">
        <div id="onboarding-tooltip-content"></div>
        <div id="onboarding-tooltip-actions">
            <button id="onboarding-action-primary" class="button"></button>
            <button id="onboarding-action-secondary" class="button-link">Skip Tour</button>
        </div>
    </div>
    <div id="app-container">
        <div id="top-info-bar">
            <div id="appTitleContainer">
                <div id="appLogo">⬡</div>
                <span id="appTitle">HexLife Explorer</span>
                <a href="https://github.com/Sidem/HexLife/" target="_blank" rel="noopener" title="View on GitHub" id="githubLink" style="margin-left: 10px; color: #ccc; text-decoration: none; font-size:0.9em;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16" style="vertical-align: middle;">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    GitHub
                </a>
            </div>
            <div id="rulesetDisplayContainer">
                <code id="rulesetDisplay">N/A</code>
            </div>
            <div id="statsDisplayContainer">
                <span>Tick: <span id="stat-tick">--</span></span>
                <span>Ratio: <span id="stat-ratio">--</span>%</span>
                <span>Brush: <span id="stat-brush-size">--</span></span>
                <span>FPS: <span id="stat-fps">--</span></span>
                <span>TPS: <span id="stat-actual-tps">--</span>/<span id="stat-target-tps">--</span></span>
            </div>
        </div>

        <div id="main-content-area">
            <div id="vertical-toolbar" role="toolbar" aria-label="Main controls">
                <button id="playPauseButton" class="toolbar-button" title="[P]lay/Pause Simulation">▶</button>
                <button id="speedControlButton" class="toolbar-button" title="Adjust Speed">SPD</button>
                <button id="brushToolButton" class="toolbar-button" title="Brush Tool / Adjust Size">BRS</button>
                <div class="toolbar-separator" role="separator"></div>

                <button id="newRulesButton" class="toolbar-button" title="[N]ew Ruleset Options">NEW</button> 
                <button id="setRulesetButton" class="toolbar-button" title="Set/Copy Ruleset Hex">HEX</button>
                <div class="toolbar-separator" role="separator"></div>

                <button id="resetClearButton" class="toolbar-button" title="Reset/Clear Worlds">R/C</button>
                <div class="toolbar-separator" role="separator"></div>

                <button id="editRuleButton" class="toolbar-button" title="[E]dit Ruleset Panel">EDT</button> 
                <button id="setupPanelButton" class="toolbar-button" title="[S]etup Worlds Panel">SET</button> 
                <button id="analysisPanelButton" class="toolbar-button" title="[A]nalysis Panel">ANL</button>
                <button id="rankPanelButton" class="toolbar-button" title="Rule Rank Panel">RNK</button>
                <div class="toolbar-separator" role="separator"></div>

                <button id="saveStateButton" class="toolbar-button" title="Save Selected World State">SAV</button>
                <button id="loadStateButton" class="toolbar-button" title="Load World State">LOD</button>
                <button id="shareButton" class="toolbar-button" title="Share Setup">SHR</button>
                <button id="helpButton" class="toolbar-button" title="Help">HLP</button>
            </div>
            <canvas id="hexGridCanvas" aria-label="Hexagonal cellular automaton simulation display"></canvas>
        </div>

        <div id="speedPopout" class="popout-panel hidden">
            <label for="speedSliderPopout">Speed:</label>
            <div id="speedSliderMountPopout"></div>
        </div>
        <div id="brushPopout" class="popout-panel hidden">
            <label for="brushSliderPopout">Brush Size:</label>
            <div id="neighborhoodSizeSliderMountPopout"></div>
        </div>
        <div id="newRulesPopout" class="popout-panel hidden">
            <h4>Generate New Ruleset</h4>
            <div class="form-group">
                <label>Mode:</label>
                <div id="generateModeSwitchPopout" class="three-way-switch">
                    <input type="radio" id="genModeRandomPopout" name="generateModePopout" value="random" class="radio-switch-input">
                    <label for="genModeRandomPopout" class="radio-switch-label">Random</label>

                    <input type="radio" id="genModeNCountPopout" name="generateModePopout" value="n_count" class="radio-switch-input">
                    <label for="genModeNCountPopout" class="radio-switch-label">N-Count</label>

                    <input type="radio" id="genModeRSymPopout" name="generateModePopout" value="r_sym" class="radio-switch-input" checked>
                    <label for="genModeRSymPopout" class="radio-switch-label">R-Sym</label>
                </div>
            </div>
            <div class="form-group bias-controls">
                <input type="checkbox" id="useCustomBiasCheckboxPopout" class="checkbox-input" checked>
                <label for="useCustomBiasCheckboxPopout" class="checkbox-label">Custom Bias:</label>
                <div id="biasSliderMountPopout"></div>
            </div>
            <div class="form-group">
                <label>Apply to:</label>
                <div id="rulesetScopeSwitchPopout" class="three-way-switch">
                    <input type="radio" id="scopeSelectedPopout" name="rulesetScopePopout" value="selected" class="radio-switch-input">
                    <label for="scopeSelectedPopout" class="radio-switch-label">Selected</label>
                    <input type="radio" id="scopeAllPopout" name="rulesetScopePopout" value="all" class="radio-switch-input" checked>
                    <label for="scopeAllPopout" class="radio-switch-label">All</label>
                </div>
            </div>
            <div class="form-group">
                <input type="checkbox" id="resetOnNewRuleCheckboxPopout" class="checkbox-input" checked>
                <label for="resetOnNewRuleCheckboxPopout" class="checkbox-label">Auto-Reset World(s)</label>
            </div>
            <button id="generateRulesetFromPopoutButton" class="button">Generate</button>
        </div>
        <div id="setHexPopout" class="popout-panel hidden">
            <h4>Set/Copy Ruleset Hex</h4>
            <div class="form-group">
                <input type="text" id="rulesetInputPopout" class="hex-input" placeholder="32 hex chars" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
            </div>
            <div class="form-group-buttons">
                <button id="setRuleFromPopoutButton" class="button">Set</button>
                <button id="copyRuleFromPopoutButton" class="button">Copy Current</button>
            </div>
        </div>
        <div id="resetClearPopout" class="popout-panel hidden">
            <h4>Reset / Clear</h4>
            <button id="resetCurrentButtonPopout" class="button">Reset Selected</button>
            <button id="resetAllButtonPopout" class="button">Reset All</button>
            <div class="popout-separator"></div>
            <button id="clearCurrentButtonPopout" class="button">Clear Selected</button>
            <button id="clearAllButtonPopout" class="button">Clear All</button>
        </div>

        <div id="sharePopout" class="popout-panel hidden">
            <h4>Share Link</h4>
            <div class="form-group">
                <label for="shareLinkInput">Your shareable link:</label>
                <input type="text" id="shareLinkInput" class="hex-input" readonly>
            </div>
            <div class="form-group-buttons">
                <button id="copyShareLinkButton" class="button">Copy to Clipboard</button>
            </div>
        </div>

        <div id="rulesetEditorPanel" class="draggable-panel-base hidden" role="dialog" aria-labelledby="rulesetEditorTitle" aria-modal="true">
            <button id="closeEditorButton" class="close-panel-button" title="Close Panel">&times;</button>
            <h3 id="rulesetEditorTitle">Ruleset Editor</h3>
            <div class="editor-controls">
                <input type="text" id="editorRulesetInput" class="editor-hex-input"
                    placeholder="32 hex chars (e.g., FFFFFF...000000)"
                    title="Current ruleset hex code. Edit and press Enter or click away to apply."
                    autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                <button id="clearRulesButton" class="button"
                    title="Set all rules to inactive, or active if all are already inactive">Clear/Fill</button>
                <select id="rulesetEditorMode" title="Choose editor mode">
                    <option value="detailed">Detailed (128 rules)</option>
                    <option value="neighborCount">Neighbor Count (14 groups)</option>
                    <option value="rotationalSymmetry" selected>Rotational Symmetry (28 groups)</option>
                </select>
            </div>
            <div class="editor-apply-scope-controls">
                <label>Apply Changes To:</label>
                <div class="radio-group" role="radiogroup" aria-label="Apply changes scope">
                    <input type="radio" id="editorApplyScopeSelected" name="editorApplyScope" value="selected"
                        class="radio-switch-input" checked>
                    <label for="editorApplyScopeSelected" class="radio-switch-label">Selected World</label>
                    <input type="radio" id="editorApplyScopeAll" name="editorApplyScope" value="all"
                        class="radio-switch-input">
                    <label for="editorApplyScopeAll" class="radio-switch-label">All Worlds</label>
                </div>
                <div class="editor-auto-reset-control">
                    <input type="checkbox" id="editorAutoResetCheckbox" class="checkbox-input" checked>
                    <label for="editorAutoResetCheckbox" class="checkbox-label">Auto-Reset on Change</label>
                </div>
            </div>
            <div class="panel-content-area">
                <div id="rulesetEditorGrid" class="hidden"></div>
                <div id="neighborCountRulesetEditorGrid" class="hidden"></div>
                <div id="rotationalSymmetryRulesetEditorGrid"></div>
                <div class="editor-text">
                    <p>This editor modifies the ruleset of the currently selected world. Use "Apply Changes To" to
                        propagate these changes.</p>
                    <p>Click rule visualizations to toggle output states.</p>
                    <div class="editor-text-rules">
                        <p><span class="inline-hex state-0"><span class="inline-hex-inner state-0"></span></span> stays
                            inactive</p>
                        <p><span class="inline-hex state-0"><span class="inline-hex-inner state-1"></span></span>
                            becomes active</p>
                        <p><span class="inline-hex state-1"><span class="inline-hex-inner state-0"></span></span>
                            becomes inactive</p>
                        <p><span class="inline-hex state-1"><span class="inline-hex-inner state-1"></span></span> stays
                            active</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="setupPanel" class="draggable-panel-base hidden" role="dialog" aria-labelledby="setupPanelTitle" aria-modal="true">
            <button id="closeSetupPanelButton" class="close-panel-button" title="Close Panel">&times;</button>
            <h3 id="setupPanelTitle">World Setup</h3>
            <div class="panel-content-area">
                <p class="editor-text info-text">Configure initial density and enable/disable individual worlds. Click
                    "Use Main Ruleset" to apply the selected world's (main view) ruleset to a specific world here and
                    reset it.</p>
                <div id="worldSetupGrid" class="world-config-grid">
                </div>
                <div class="panel-actions">
                    <button id="applySetupButton" class="button">Apply & Reset All Enabled Worlds</button>
                </div>
            </div>
        </div>

        <div id="analysisPanel" class="draggable-panel-base hidden" role="dialog" aria-labelledby="analysisPanelTitle" aria-modal="true">
            <button id="closeAnalysisPanelButton" class="close-panel-button" title="Close Panel">&times;</button>
            <h3 id="analysisPanelTitle">Analysis Tools</h3>
            <div class="panel-content-area">
                <div class="plugins-mount-area">
                </div>
            </div>
        </div>

        <div id="ruleRankPanel" class="draggable-panel-base hidden" role="dialog" aria-labelledby="rankPanelTitle" aria-modal="true">
            <button id="closeRankPanelButton" class="close-panel-button" title="Close Panel">&times;</button>
            <h3 id="rankPanelTitle">Rule Usage Ranking</h3>
            <div id="ruleRankContent" class="panel-content-area">
            </div>
        </div>

    </div> 
    
    <input type="file" id="fileInput" accept=".txt,.json" style="display: none;" aria-label="Load file">
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                const loadingIndicator = document.getElementById('loading-indicator');
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
            }, 100);
        });
        
        document.addEventListener('touchstart', function(e) {
        }, { passive: true });
        
        document.addEventListener('touchmove', function(e) {
            if (e.touches.length === 1 && e.touches[0].clientY > 50) {
            }
            if (document.documentElement.scrollTop === 0 && e.touches[0].clientY > e.touches[0].clientY) {
                e.preventDefault();
            }
        }, { passive: false });
        if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            document.addEventListener('DOMContentLoaded', function() {
                document.body.style.webkitTapHighlightColor = 'transparent';
                document.body.style.webkitTouchCallout = 'none';
            });
        }
    </script>
    
    <script type="module" src="src/main.js"></script>
</body>

</html>
